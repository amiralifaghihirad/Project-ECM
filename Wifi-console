#include <SoftwareSerial.h>

#define GAS_SENSOR A0 #define TEMP_SENSOR A1 #define SENSOR_3 A2

SoftwareSerial esp(10, 11); // RX, TX

unsigned long lastRead = 0; const unsigned long interval = 2000;

void setup() { Serial.begin(9600); esp.begin(9600); delay(1000); setupWiFi(); }

void loop() { if (millis() - lastRead >= interval) { int gas = analogRead(GAS_SENSOR); int temp = analogRead(TEMP_SENSOR); int s3 = analogRead(SENSOR_3); sendDataToServer(gas, temp, s3); lastRead = millis(); } }

void sendAT(const char* cmd) { esp.println(cmd); delay(500); while (esp.available()) { Serial.write(esp.read()); } }

void setupWiFi() { sendAT("AT"); sendAT("AT+CWMODE=1"); sendAT("AT+CWJAP="YourSSID","YourPassword""); }

void sendDataToServer(int gas, int temp, int s3) { char cmd[100]; sprintf(cmd, "AT+CIPSTART="TCP","192.168.1.100",80"); sendAT(cmd);

char data[150]; sprintf(data, "GET /log?gas=%d&temp=%d&s3=%d HTTP/1.1\r\nHost: 192.168.1.100\r\n\r\n", gas, temp, s3);

sprintf(cmd, "AT+CIPSEND=%d", strlen(data)); sendAT(cmd); esp.print(data); }
